(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{286:function(t,s,n){t.exports=n.p+"assets/img/tftptree.ef1a6526.png"},287:function(t,s,n){t.exports=n.p+"assets/img/ubuntufiles.3dd9a51e.png"},288:function(t,s,n){t.exports=n.p+"assets/img/dhcp.0d1b3287.png"},351:function(t,s,n){"use strict";n.r(s);var e=n(12),a=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"netboots"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#netboots"}},[t._v("#")]),t._v(" Netboots")]),t._v(" "),s("p",[t._v("All things related to network booting, pxe etc...")]),t._v(" "),s("hr"),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#ipxe-setup"}},[t._v("iPXE Setup")]),s("ul",[s("li",[s("a",{attrs:{href:"#load-a-remote-script"}},[t._v("Load a remote script")])]),s("li",[s("a",{attrs:{href:"#ubuntu-18-04-auto-install"}},[t._v("Ubuntu 18.04 Auto install")])]),s("li",[s("a",{attrs:{href:"#boot-script"}},[t._v("Boot Script")])])])]),s("li",[s("a",{attrs:{href:"#pxe-setup"}},[t._v("PXE Setup")]),s("ul",[s("li",[s("a",{attrs:{href:"#tftp-server"}},[t._v("TFTP Server")])]),s("li",[s("a",{attrs:{href:"#webserver"}},[t._v("Webserver")])]),s("li",[s("a",{attrs:{href:"#dhcp-setup"}},[t._v("DHCP Setup")])])])]),s("li",[s("a",{attrs:{href:"#preseed"}},[t._v("Preseed")]),s("ul",[s("li",[s("a",{attrs:{href:"#ubuntu"}},[t._v("Ubuntu")])])])]),s("li",[s("a",{attrs:{href:"#ubuntu-20-04"}},[t._v("Ubuntu 20.04")])]),s("li",[s("a",{attrs:{href:"#almalinux-9"}},[t._v("Almalinux 9")])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"ipxe-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ipxe-setup"}},[t._v("#")]),t._v(" iPXE Setup")]),t._v(" "),s("p",[t._v("Explanation of how to use iPXE")]),t._v(" "),s("h3",{attrs:{id:"load-a-remote-script"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#load-a-remote-script"}},[t._v("#")]),t._v(" Load a remote script")]),t._v(" "),s("p",[t._v("This will load a boot script from a remote server")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("#!ipxe chain http://<webserver>/ipxe/boot\n")])])]),s("h3",{attrs:{id:"ubuntu-18-04-auto-install"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-18-04-auto-install"}},[t._v("#")]),t._v(" Ubuntu 18.04 Auto install")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("#!ipxe\nset base-url http://<webserver>\n\necho Starting Ubuntu 18.04 Installer\nkernel -n 1804a ${base-url}/ipxe/ubuntu/1804/linux\ninitrd ${base-url}/ipxe/ubuntu/1804/initrd.gz\nimgargs 1804a initrd=initrd.gz locale=en_GB console-setup/ask_detect=false debian-installer/keymap=gb domain=localdomain hostname=unassigned auto priority=critical netcfg/choose_interface=auto preseed/url=${base-url}/ipxe/ubuntu/1804/preseed.cfg\nboot 1804a\n")])])]),s("p",[t._v("See "),s("a",{attrs:{href:"#preseed"}},[t._v("Preseed")])]),t._v(" "),s("h3",{attrs:{id:"boot-script"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#boot-script"}},[t._v("#")]),t._v(" Boot Script")]),t._v(" "),s("p",[t._v("This is the boot script on the remote web server.\nWindows installations probably don't work due to driver issues.")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("#!ipxe\nset base-url http://<webserver>\n\nset menu-timeout 30000\nset submenu-timeout ${menu-timeout}\nisset ${menu-default} || set menu-default exit\n\n:start\nmenu iPXE boot menu\n\nitem --gap --             ------------------------- Install Menu -----------------------------------\nitem ubuntu1604 Install Ubuntu 16.04 from public archive\nitem ubuntu1804 Install Ubuntu 18.04 from public archive\nitem server2012r2 Install Windows Server 2012 R2\nitem server2012r2wim Install Windows Server 2012 R2 using wimboot\nitem --gap --             ------------------------- Advanced options -------------------------------\nitem rescue64             Launch SYSRescue64\nitem shell                Drop to iPXE shell\nitem reboot               Reboot computer\nitem\nitem --key x exit         Exit iPXE and continue BIOS boot\nchoose --timeout ${menu-timeout} --default ${menu-default} selected || goto cancel\nset menu-timeout 0\ngoto ${selected}\n\n:cancel\necho You cancelled the menu, dropping you to a shell\n\n:shell\necho Type 'exit' to get the back to the menu\nshell\nset menu-timeout 0\nset submenu-timeout 0\ngoto start\n\n:failed\necho Booting failed, dropping to shell\ngoto shell\n\n:reboot\nreboot\n\n:exit\nexit\n\n:rescue64\necho Starting SYSRescue64\ninitrd ${base-url}/ipxe/rescue/isolinux/initram.igz\nchain ${base-url}/ipxe/rescue/isolinux/rescue64 dodhcp netboot=${base-url}/ipxe/rescue/sysrcd.dat || goto failed\n\n:ubuntu1604\necho Starting Ubuntu 16.04 Installer\nkernel ${base-url}/ipxe/ubuntu/1604/linux\ninitrd ${base-url}/ipxe/ubuntu/1604/initrd.gz\n#imgargs linux auto=true url=${base-url}/ipxe/ubuntu/preseed.cfg\nboot || goto failed\n\n:ubuntu1804\necho Starting Ubuntu 18.04 Installer\nkernel ${base-url}/ipxe/ubuntu/1804/linux\ninitrd ${base-url}/ipxe/ubuntu/1804/initrd.gz\n#imgargs linux auto=true url=${base-url}/ipxe/ubuntu/preseed.cfg\nboot || goto failed\n\n:server2012r2\necho Starting Windows Server 2012 R2 Installer\nsanboot --no-describe ${base-url}/ipxe/win/en_windows_server_2012_r2_x64_dvd_2707946.iso || goto failed\n\n:server2012r2wim\necho Starting Windows Server 2012 R2 Installer\nkernel ${base-url}/ipxe/wimboot\ninitrd ${base-url}/ipxe/win/iso/2012r2/x64/bootmgr bootmgr\ninitrd ${base-url}/ipxe/win/iso/2012r2/x64/boot/bcd BCD\ninitrd ${base-url}/ipxe/win/iso/2012r2/x64/boot/boot.sdi boot.sdi\ninitrd ${base-url}/ipxe/win/iso/2012r2/x64/sources/boot.wim boot.wim\nboot || goto failed\n")])])]),s("h2",{attrs:{id:"pxe-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pxe-setup"}},[t._v("#")]),t._v(" PXE Setup")]),t._v(" "),s("p",[t._v("Explanation of how the PXE installation is configured on the home network.")]),t._v(" "),s("h3",{attrs:{id:"tftp-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tftp-server"}},[t._v("#")]),t._v(" TFTP Server")]),t._v(" "),s("p",[t._v("You will need a TFTP server to serve up the initial netboot files.\n"),s("img",{attrs:{src:n(286),alt:""}})]),t._v(" "),s("p",[t._v("The Ubuntu files are available from the official repository\n"),s("img",{attrs:{src:n(287),alt:""}})]),t._v(" "),s("p",[t._v("Contents of "),s("code",[t._v("default")]),t._v(" file")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("default vesamenu.c32\npath boot-screens/\nprompt 0\ntimeout 150\nONTIMEOUT local\nMENU TITLE Select a boot option\n\nLABEL local\n  MENU LABEL Boot From ^Local Disk\n  LOCALBOOT 0\n\nLABEL rescue64\n  MENU LABEL Launch ^Rescue64\n  KERNEL images/rescue/isolinux/rescue64\n  APPEND initrd=images/rescue/isolinux/initram.igz dodhcp netboot=http://192.168.10.250/rescue/sysrcd.dat\n\nLABEL rescue\n  MENU LABEL Ubuntu 16.04 Rescue mode\n  kernel images/ubuntu/xenial/amd64/linux\n  append vga=788 initrd=images/ubuntu/xenial/amd64/initrd.gz rescue/enable=true --- quiet\n\nMENU SEPARATOR\n\nMENU BEGIN Install\nMENU TITLE Select an OS to install\n\n  LABEL Go Back\n    MENU EXIT\n  \n  LABEL Centos-7.0-x86_64\n    MENU LABEL Install CentOS 7.0 x86_64 (Manual attended install)\n    KERNEL images/centos/7.0/x86_64/vmlinuz\n    APPEND initrd=images/centos/7.0/x86_64/initrd.img ramdisk_size=100000 ip=dhcp inst.repo=http://centos.serverspace.co.uk/centos/7/os/x86_64\n\n  LABEL Ubuntu-16.04-Xenial\n    MENU LABEL Network Install Ubuntu 16.04 (^Xenial)\n    KERNEL images/ubuntu/xenial/amd64/linux\n    APPEND initrd=images/ubuntu/xenial/amd64/initrd.gz ramdisk_size=16432 locale=en_GB console-setup/ask_detect=false debian-installer/keymap=gb domain=localdomain hostname=unassigned auto url=http://192.168.10.250/dist/ubuntu/1604std.cfg\n\n  LABEL Ubuntu-16.04-Xenial-man\n    MENU LABEL Manual Network Install Ubuntu 16.04 (Xenial)\n    KERNEL images/ubuntu/xenial/amd64/linux\n    APPEND initrd=images/ubuntu/xenial/amd64/initrd.gz ramdisk_size=16432 locale=en_GB console-setup/ask_detect=false debian-installer/keymap=gb domain=localdomain hostname=unassigned\n\n\t\n  LABEL Ubuntu-18.04-BionicBeaver\n    MENU LABEL Network Install Ubuntu 18.04 (^Bionic Beaver)\n    KERNEL images/ubuntu/bionic/amd64/linux\n    APPEND initrd=images/ubuntu/bionic/amd64/initrd.gz ramdisk_size=16432 locale=en_GB console-setup/ask_detect=false debian-installer/keymap=gb domain=localdomain hostname=unassigned auto url=http://192.168.10.250/dist/ubuntu/1804std.cfg\n\nMENU END\n")])])]),s("h3",{attrs:{id:"webserver"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webserver"}},[t._v("#")]),t._v(" Webserver")]),t._v(" "),s("p",[t._v("The webserver holds the installation files and the preseed script which will be specified in the TFTP section. E.g. "),s("code",[t._v("http://192.168.10.250/dist/ubuntu/1604std.cfg")])]),t._v(" "),s("p",[t._v("See "),s("a",{attrs:{href:"#preseed"}},[t._v("Preseed")])]),t._v(" "),s("h3",{attrs:{id:"dhcp-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dhcp-setup"}},[t._v("#")]),t._v(" DHCP Setup")]),t._v(" "),s("p",[t._v("DHCP has to be set up to point at your initial netboot server, which is a tftp server.\n"),s("img",{attrs:{src:n(288),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"preseed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#preseed"}},[t._v("#")]),t._v(" Preseed")]),t._v(" "),s("p",[t._v("Example preseed scripts used in the current deployment.\nPasswords have been removed, see "),s("RouterLink",{attrs:{to:"/linux/pass.html#create-a-password-using-a-command"}},[t._v("mkpasswd")]),t._v(" on how to generate a password.")],1),t._v(" "),s("h3",{attrs:{id:"ubuntu"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu"}},[t._v("#")]),t._v(" Ubuntu")]),t._v(" "),s("h4",{attrs:{id:"ubuntu-16-04-preseed-script"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-16-04-preseed-script"}},[t._v("#")]),t._v(" Ubuntu 16.04 Preseed Script")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("#### Contents of the preconfiguration file (for xenial)\n\n### Localization\nd-i debian-installer/locale string en_GB\n\n# Keyboard selection.\n# Disable automatic (interactive) keymap detection.\nd-i console-setup/ask_detect boolean false\nd-i keyboard-configuration/xkb-keymap select gb\n\n### Network configuration\nd-i netcfg/choose_interface select auto\nd-i netcfg/get_hostname string unassigned\nd-i netcfg/get_domain string localdomain\n\n# Disable that annoying WEP key dialog.\nd-i netcfg/wireless_wep string\n\n### Mirror settings\nd-i mirror/country string manual\nd-i mirror/http/hostname string 192.168.10.250\nd-i mirror/http/directory string /dist/ubuntu/ubuntu1604\nd-i mirror/http/proxy string\nd-i mirror/suite string xenial\n\n### Account setup\n# To create a normal user account.\nd-i passwd/user-fullname string m00\nd-i passwd/username string m00\nd-i passwd/user-password-crypted password $6$<snip>\nd-i user-setup/allow-password-weak boolean true\n\n# Set to true if you want to encrypt the first user's home directory.\nd-i user-setup/encrypt-home boolean false\n\n### Clock and time zone setup\nd-i clock-setup/utc boolean true\nd-i time/zone string Europe/London\nd-i clock-setup/ntp boolean true\nd-i clock-setup/ntp-server string pool.ntp.org\n\n### Partitioning\nd-i partman-auto/disk string /dev/sda\nd-i partman-auto/method string lvm\nd-i partman-lvm/device_remove_lvm boolean true\nd-i partman-md/device_remove_md boolean true\nd-i partman-lvm/confirm boolean true\nd-i partman-lvm/confirm_nooverwrite boolean true\nd-i partman-auto-lvm/guided_size string max\nd-i partman-auto/choose_recipe select atomic\nd-i partman/default_filesystem string ext4\nd-i partman-partitioning/confirm_write_new_label boolean true\nd-i partman/choose_partition select finish\nd-i partman/confirm boolean true\nd-i partman/confirm_nooverwrite boolean true\n\n### Base system installation\nd-i base-installer/install-recommends boolean true\nd-i base-installer/kernel/image string linux-generic\n\n### Package selection\ntasksel tasksel/first multiselect standard\n\n# Individual additional packages to install\nd-i pkgsel/include string openssh-server open-vm-tools python-simplejson curl cifs-utils software-properties-common binutils\nd-i pkgsel/upgrade select full-upgrade\nd-i pkgsel/update-policy select unattended-upgrades\n\nd-i grub-installer/only_debian boolean true\nd-i grub-installer/bootdev  string default\n\nd-i finish-install/reboot_in_progress note\nd-i cdrom-detect/eject boolean false\n\n# in-target sh -c 'usermod -p \"\" m00'; \\\n# in-target sh -c 'passwd -e m00'; \\\n\n#### Advanced options\n### Running custom commands during the installation\nd-i preseed/late_command string \\\n in-target sh -c 'usermod -p \"!\" root'; \\\n in-target sh -c 'mkdir -p --mode=0700 /root/.ssh && echo \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC5KaNzN+dE9ZU83seeXSJb5gX4xRANc7eHNbQuyMXvBGSP942UpHrKgmb2Hd+f1sxH5FeLaE82p4T5Hxa+YbSEKT6VQEiktqRDmTSjiTtl2GEjaDedi0UTXB/D8nZXIbsrfkAwdQ3DgSUi7X7bdPBK43ZFE81qIPzAvl0rKhrAgJcY1HFQhlNmMzxNhPWSG9s0OqmSviC1tGooicpBLr9ibBPiQ5uc5pimYRbd6+zIbFNjNy/SqT+pWVF8J6Qp4GnHIpZZ1TMn3xluYL28zD5B5ItC8gDxfH/uaalRwe0NLEPTwWkT3ipwFaFwH8vZFCdaVU8KqUSpWH59VNHFTbKt\" > /root/.ssh/authorized_keys && chmod 0600 /root/.ssh/authorized_keys';  \\\n in-target sh -c 'mkdir -p --mode=0700 /home/m00/.ssh && echo \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC5KaNzN+dE9ZU83seeXSJb5gX4xRANc7eHNbQuyMXvBGSP942UpHrKgmb2Hd+f1sxH5FeLaE82p4T5Hxa+YbSEKT6VQEiktqRDmTSjiTtl2GEjaDedi0UTXB/D8nZXIbsrfkAwdQ3DgSUi7X7bdPBK43ZFE81qIPzAvl0rKhrAgJcY1HFQhlNmMzxNhPWSG9s0OqmSviC1tGooicpBLr9ibBPiQ5uc5pimYRbd6+zIbFNjNy/SqT+pWVF8J6Qp4GnHIpZZ1TMn3xluYL28zD5B5ItC8gDxfH/uaalRwe0NLEPTwWkT3ipwFaFwH8vZFCdaVU8KqUSpWH59VNHFTbKt\" > /home/m00/.ssh/authorized_keys && chmod 0600 /home/m00/.ssh/authorized_keys && chown -R m00:m00 /home/m00/.ssh';  \\\n in-target sh -c 'echo \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC6NfziEHlyzmxiU1ftIMyx8Hh8CbgiawB+wZb02aJd0Uc3lrcm+YGVxCa2jXr9hTO/YT30u4r+X91wGRJblPwyt94OqnwbGmTT+awnwshWfI8h+SP64Y4C+O9vX6b7TCmIsiXBjY35x79QfjFjHkMIZETGrU2M0v8AgfnASPR2VZw89herazZSCcvDZzmg7onGxsNulzp0s6+ldJo27clD9lXfkYtH5oZJZ+60S+lSzcAgE/EkNCAC/XwMj/qoCH2CO/oS+PR+sittw7EwJCMkt7QkQtvTDyPaLA6i2vp7JyEx8KkdsTnZm4yRr9m/I9rk3tR4DS9oj2+MPL0sfkjhMmL0jpuQaQYQczYVNo5hhAFkiVQecXHPr4G9xz4MfUy02oWGqm0hYNuWXaD1VG8Ysg3sIJQOUL7mRpjcpXh3cqP1CYF2oyKwWJh8Mwxr8nnD+F3iFJrcYqA+tgbZ+WMHLTgROK/lGVzuDx73NI9g4K0kfXjxX4AFfLjwVJmOPzzxGnAftCGFrbjENUhiwF9wBh8t825mnlItAPXo7xImmQbjwKyR5m3HKtDbXiFCbtP9DyoocABphK7+9s7kTgJnD0hzW1GqMLlWFrxRWgQniJX/ChbEaZovaLdUncPrun3HFpqQk+Np0q+l8K0CW16PYjUkZNq7warhRZ1YcKHT2Q== ansible@blasteh.uk\" >> /home/m00/.ssh/authorized_keys';  \\\n in-target sh -c 'sed -i \"s/.*PermitRootLogin.*/PermitRootLogin prohibit-password/g\" /etc/ssh/sshd_config'; \\\n in-target sh -c 'sed -i \"s/.*PasswordAuthentication.*/PasswordAuthentication no/g\" /etc/ssh/sshd_config'; \\\n in-target sh -c 'sed -i \"s|192.168.10.250/dist/ubuntu/ubuntu1604|gb.archive.ubuntu.com/ubuntu|g\" /etc/apt/sources.list'; \\\n in-target sh -c 'apt-get update && apt-get upgrade -y';\n")])])]),s("h4",{attrs:{id:"ubuntu-18-04-preseed-script-for-raid-1-ovh"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-18-04-preseed-script-for-raid-1-ovh"}},[t._v("#")]),t._v(" Ubuntu 18.04 Preseed script for raid 1 (OVH)")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("#### Contents of the preconfiguration file (for bionic)\nd-i debian-installer/locale string en_GB\nd-i console-setup/ask_detect boolean false\nd-i keyboard-configuration/xkb-keymap select gb\nd-i netcfg/choose_interface select auto\nd-i netcfg/get_hostname string unassigned\nd-i netcfg/get_domain string localdomain\nd-i netcfg/wireless_wep string\nd-i mirror/country string manual\nd-i mirror/http/hostname string archive.ubuntu.com\nd-i mirror/http/directory string /ubuntu\nd-i mirror/http/proxy string\nd-i mirror/http/mirror select gb.archive.ubuntu.com\nd-i passwd/make-user boolean false\nd-i passwd/user-fullname string ubuntu\nd-i passwd/username string ubuntu\nd-i passwd/user-password-crypted password $6$<snip>\nd-i user-setup/allow-password-weak boolean true\nd-i user-setup/encrypt-home boolean false\nd-i clock-setup/utc boolean true\nd-i time/zone string Europe/London\nd-i clock-setup/ntp boolean true\nd-i clock-setup/ntp-server string pool.ntp.org\n\nd-i partman-auto/disk string /dev/sda /dev/sdb\nd-i partman-auto/method string raid\nd-i partman-auto-raid/recipe string \\\n  1 2 0 ext3 /boot /dev/sda1#/dev/sdb1 . \\\n  1 2 0 swap - /dev/sda2#/dev/sdb2 . \\\n  1 2 0 ext4 / /dev/sda3#/dev/sdb3 .\nd-i partman-auto/expert_recipe string \\\n    multiraid ::                                    \\\n        512 512 512 raid                            \\\n            $primary{ } $bootable{ }                \\\n            method{ raid }                          \\\n            $lvmignore{ }                           \\\n        .                                           \\\n        1024 8000 4096 raid                         \\\n            $primary{ } method{ raid }              \\\n            $lvmignore{ }                           \\\n        .                                           \\\n        2048 10000 0 raid                           \\\n            $primary{ } method{ raid }              \\\n            $lvmignore{ }                           \\\n        .\nd-i partman-md/device_remove_md boolean true\nd-i partman-md/confirm boolean true\nd-i partman-md/confirm_nooverwrite boolean true\nd-i partman-lvm/device_remove_lvm boolean true\nd-i partman-lvm/confirm boolean true\nd-i partman-lvm/confirm_nooverwrite boolean true\nd-i partman/default_filesystem string ext4\nd-i partman-partitioning/confirm_write_new_label boolean true\nd-i partman/confirm boolean true\nd-i partman/confirm_nooverwrite boolean true\nd-i partman/choose_partition select finish\nd-i base-installer/install-recommends boolean true\nd-i base-installer/kernel/image string linux-generic\ntasksel tasksel/first multiselect standard\nd-i pkgsel/include string openssh-server python-simplejson curl cifs-utils software-properties-common binutils\nd-i pkgsel/upgrade select full-upgrade\nd-i pkgsel/update-policy select unattended-upgrades\nd-i grub-installer/only_debian boolean true\nd-i grub-installer/bootdev  string default\nd-i finish-install/reboot_in_progress note\nd-i cdrom-detect/eject boolean false\nd-i preseed/late_command string \\\n in-target sh -c 'usermod -p \"!\" root'; \\\n in-target sh -c 'mkdir -p --mode=0700 /root/.ssh && echo \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC5KaNzN+dE9ZU83seeXSJb5gX4xRANc7eHNbQuyMXvBGSP942UpHrKgmb2Hd+f1sxH5FeLaE82p4T5Hxa+YbSEKT6VQEiktqRDmTSjiTtl2GEjaDedi0UTXB/D8nZXIbsrfkAwdQ3DgSUi7X7bdPBK43ZFE81qIPzAvl0rKhrAgJcY1HFQhlNmMzxNhPWSG9s0OqmSviC1tGooicpBLr9ibBPiQ5uc5pimYRbd6+zIbFNjNy/SqT+pWVF8J6Qp4GnHIpZZ1TMn3xluYL28zD5B5ItC8gDxfH/uaalRwe0NLEPTwWkT3ipwFaFwH8vZFCdaVU8KqUSpWH59VNHFTbKt\" > /root/.ssh/authorized_keys && chmod 0600 /root/.ssh/authorized_keys';  \\\n in-target sh -c 'echo \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC6NfziEHlyzmxiU1ftIMyx8Hh8CbgiawB+wZb02aJd0Uc3lrcm+YGVxCa2jXr9hTO/YT30u4r+X91wGRJblPwyt94OqnwbGmTT+awnwshWfI8h+SP64Y4C+O9vX6b7TCmIsiXBjY35x79QfjFjHkMIZETGrU2M0v8AgfnASPR2VZw89herazZSCcvDZzmg7onGxsNulzp0s6+ldJo27clD9lXfkYtH5oZJZ+60S+lSzcAgE/EkNCAC/XwMj/qoCH2CO/oS+PR+sittw7EwJCMkt7QkQtvTDyPaLA6i2vp7JyEx8KkdsTnZm4yRr9m/I9rk3tR4DS9oj2+MPL0sfkjhMmL0jpuQaQYQczYVNo5hhAFkiVQecXHPr4G9xz4MfUy02oWGqm0hYNuWXaD1VG8Ysg3sIJQOUL7mRpjcpXh3cqP1CYF2oyKwWJh8Mwxr8nnD+F3iFJrcYqA+tgbZ+WMHLTgROK/lGVzuDx73NI9g4K0kfXjxX4AFfLjwVJmOPzzxGnAftCGFrbjENUhiwF9wBh8t825mnlItAPXo7xImmQbjwKyR5m3HKtDbXiFCbtP9DyoocABphK7+9s7kTgJnD0hzW1GqMLlWFrxRWgQniJX/ChbEaZovaLdUncPrun3HFpqQk+Np0q+l8K0CW16PYjUkZNq7warhRZ1YcKHT2Q== ansible@blasteh.uk\" >> /root/.ssh/authorized_keys';  \\\n in-target sh -c 'sed -i \"s/.*PermitRootLogin.*/PermitRootLogin prohibit-password/g\" /etc/ssh/sshd_config'; \\\n in-target sh -c 'sed -i \"s/.*PasswordAuthentication.*/PasswordAuthentication no/g\" /etc/ssh/sshd_config'; \\\n in-target sh -c 'apt-get update && apt-get upgrade -y'; \\\n in-target sh -c 'wget -O - http://<webserver>/script/install.sh | bash';\n")])])]),s("h4",{attrs:{id:"ubuntu-18-04-preseed-script"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-18-04-preseed-script"}},[t._v("#")]),t._v(" Ubuntu 18.04 Preseed Script")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("#### Contents of the preconfiguration file (for bionic)\n\n### Localization\nd-i debian-installer/locale string en_GB\n\n# Keyboard selection.\n# Disable automatic (interactive) keymap detection.\nd-i console-setup/ask_detect boolean false\nd-i keyboard-configuration/xkb-keymap select gb\n\n### Network configuration\nd-i netcfg/choose_interface select auto\nd-i netcfg/get_hostname string unassigned\nd-i netcfg/get_domain string localdomain\n\n# Disable that annoying WEP key dialog.\nd-i netcfg/wireless_wep string\n\n### Mirror settings\n#d-i mirror/country string manual\n#d-i mirror/http/hostname string 192.168.10.250\n#d-i mirror/http/directory string /dist/ubuntu/ubuntu1804\n#d-i mirror/http/proxy string\n#d-i mirror/suite string bionic\n\nd-i mirror/country string manual\nd-i mirror/http/hostname string archive.ubuntu.com\nd-i mirror/http/directory string /ubuntu\nd-i mirror/http/proxy string\n\n# Alternatively: by default, the installer uses CC.archive.ubuntu.com where\n# CC is the ISO-3166-2 code for the selected country. You can preseed this\n# so that it does so without asking.\nd-i mirror/http/mirror select gb.archive.ubuntu.com\n\n\n### Account setup\n# To create a normal user account.\nd-i passwd/user-fullname string m00\nd-i passwd/username string m00\nd-i passwd/user-password-crypted password $6$<snip>\nd-i user-setup/allow-password-weak boolean true\n\n# Set to true if you want to encrypt the first user's home directory.\nd-i user-setup/encrypt-home boolean false\n\n### Clock and time zone setup\nd-i clock-setup/utc boolean true\nd-i time/zone string Europe/London\nd-i clock-setup/ntp boolean true\nd-i clock-setup/ntp-server string pool.ntp.org\n\n### Partitioning\nd-i partman-auto/disk string /dev/sda\nd-i partman-auto/method string lvm\nd-i partman-lvm/device_remove_lvm boolean true\nd-i partman-md/device_remove_md boolean true\nd-i partman-lvm/confirm boolean true\nd-i partman-lvm/confirm_nooverwrite boolean true\nd-i partman-auto-lvm/guided_size string max\nd-i partman-auto/choose_recipe select atomic\nd-i partman/default_filesystem string ext4\nd-i partman-partitioning/confirm_write_new_label boolean true\nd-i partman/choose_partition select finish\nd-i partman/confirm boolean true\nd-i partman/confirm_nooverwrite boolean true\n\n### Base system installation\nd-i base-installer/install-recommends boolean true\nd-i base-installer/kernel/image string linux-generic\n\n### Package selection\ntasksel tasksel/first multiselect standard\n\n# Individual additional packages to install\nd-i pkgsel/include string openssh-server open-vm-tools python-simplejson curl cifs-utils software-properties-common binutils\nd-i pkgsel/upgrade select full-upgrade\nd-i pkgsel/update-policy select unattended-upgrades\n\nd-i grub-installer/only_debian boolean true\nd-i grub-installer/bootdev  string default\n\nd-i finish-install/reboot_in_progress note\nd-i cdrom-detect/eject boolean false\n\n# in-target sh -c 'usermod -p \"\" m00'; \\\n# in-target sh -c 'passwd -e m00'; \\\n\n#### Advanced options\n### Running custom commands during the installation\nd-i preseed/late_command string \\\n in-target sh -c 'usermod -p \"!\" root'; \\\n in-target sh -c 'mkdir -p --mode=0700 /root/.ssh && echo \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC5KaNzN+dE9ZU83seeXSJb5gX4xRANc7eHNbQuyMXvBGSP942UpHrKgmb2Hd+f1sxH5FeLaE82p4T5Hxa+YbSEKT6VQEiktqRDmTSjiTtl2GEjaDedi0UTXB/D8nZXIbsrfkAwdQ3DgSUi7X7bdPBK43ZFE81qIPzAvl0rKhrAgJcY1HFQhlNmMzxNhPWSG9s0OqmSviC1tGooicpBLr9ibBPiQ5uc5pimYRbd6+zIbFNjNy/SqT+pWVF8J6Qp4GnHIpZZ1TMn3xluYL28zD5B5ItC8gDxfH/uaalRwe0NLEPTwWkT3ipwFaFwH8vZFCdaVU8KqUSpWH59VNHFTbKt\" > /root/.ssh/authorized_keys && chmod 0600 /root/.ssh/authorized_keys';  \\\n in-target sh -c 'mkdir -p --mode=0700 /home/m00/.ssh && echo \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC5KaNzN+dE9ZU83seeXSJb5gX4xRANc7eHNbQuyMXvBGSP942UpHrKgmb2Hd+f1sxH5FeLaE82p4T5Hxa+YbSEKT6VQEiktqRDmTSjiTtl2GEjaDedi0UTXB/D8nZXIbsrfkAwdQ3DgSUi7X7bdPBK43ZFE81qIPzAvl0rKhrAgJcY1HFQhlNmMzxNhPWSG9s0OqmSviC1tGooicpBLr9ibBPiQ5uc5pimYRbd6+zIbFNjNy/SqT+pWVF8J6Qp4GnHIpZZ1TMn3xluYL28zD5B5ItC8gDxfH/uaalRwe0NLEPTwWkT3ipwFaFwH8vZFCdaVU8KqUSpWH59VNHFTbKt\" > /home/m00/.ssh/authorized_keys && chmod 0600 /home/m00/.ssh/authorized_keys && chown -R m00:m00 /home/m00/.ssh';  \\\n in-target sh -c 'echo \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC6NfziEHlyzmxiU1ftIMyx8Hh8CbgiawB+wZb02aJd0Uc3lrcm+YGVxCa2jXr9hTO/YT30u4r+X91wGRJblPwyt94OqnwbGmTT+awnwshWfI8h+SP64Y4C+O9vX6b7TCmIsiXBjY35x79QfjFjHkMIZETGrU2M0v8AgfnASPR2VZw89herazZSCcvDZzmg7onGxsNulzp0s6+ldJo27clD9lXfkYtH5oZJZ+60S+lSzcAgE/EkNCAC/XwMj/qoCH2CO/oS+PR+sittw7EwJCMkt7QkQtvTDyPaLA6i2vp7JyEx8KkdsTnZm4yRr9m/I9rk3tR4DS9oj2+MPL0sfkjhMmL0jpuQaQYQczYVNo5hhAFkiVQecXHPr4G9xz4MfUy02oWGqm0hYNuWXaD1VG8Ysg3sIJQOUL7mRpjcpXh3cqP1CYF2oyKwWJh8Mwxr8nnD+F3iFJrcYqA+tgbZ+WMHLTgROK/lGVzuDx73NI9g4K0kfXjxX4AFfLjwVJmOPzzxGnAftCGFrbjENUhiwF9wBh8t825mnlItAPXo7xImmQbjwKyR5m3HKtDbXiFCbtP9DyoocABphK7+9s7kTgJnD0hzW1GqMLlWFrxRWgQniJX/ChbEaZovaLdUncPrun3HFpqQk+Np0q+l8K0CW16PYjUkZNq7warhRZ1YcKHT2Q== ansible@blasteh.uk\" >> /home/m00/.ssh/authorized_keys';  \\\n in-target sh -c 'sed -i \"s/.*PermitRootLogin.*/PermitRootLogin prohibit-password/g\" /etc/ssh/sshd_config'; \\\n in-target sh -c 'sed -i \"s/.*PasswordAuthentication.*/PasswordAuthentication no/g\" /etc/ssh/sshd_config'; \\\n in-target sh -c 'sed -i \"s|192.168.10.250/dist/ubuntu/ubuntu1804|gb.archive.ubuntu.com/ubuntu|g\" /etc/apt/sources.list'; \\\n in-target sh -c 'apt-get update && apt-get upgrade -y';\n")])])]),s("h2",{attrs:{id:"ubuntu-20-04"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-20-04"}},[t._v("#")]),t._v(" Ubuntu 20.04")]),t._v(" "),s("p",[t._v("Don't really build these anymore, but I guess this is something:")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#cloud-config")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("autoinstall")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("geoip")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("preserve_sources_list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("primary")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("arches")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i386"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//gb.archive.ubuntu.com/ubuntu\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("arches")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("default"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//ports.ubuntu.com/ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ports\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("identity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hostname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("password")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <snip"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("realname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" m00"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("username")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" m00"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("keyboard")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("layout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("toggle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token null important"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("variant")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("locale")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" en_GB\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("network")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ethernets")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ens160")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dhcp4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ssh")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("allow-pw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorized-keys")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sk-ssh-ed25519@openssh.com AAAAGnNrLXNzaC1lZDI1NTE5QG9wZW5zc2guY29tAAAAIGDkEih4fsWSmYe0saDobo6R2dwNBx4gLTmUEoE4qwsBAAAABHNzaDo= m00-usba"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sk-ssh-ed25519@openssh.com AAAAGnNrLXNzaC1lZDI1NTE5QG9wZW5zc2guY29tAAAAIFGtHLAZsVSVDbiYqhaX/g4KOZs3Axqcf9fWtWPmYxeLAAAABHNzaDo= m00-usbc"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("install-server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("storage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ptable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gpt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /dev/sda"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("wipe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" superblock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("preserve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("grub_device")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" disk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" disk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("sda"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("device")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" disk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("sda"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1048576")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("flag")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bios_grub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("preserve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("grub_device")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" partition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" partition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("device")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" disk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("sda"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1073741824")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("wipe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" superblock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("flag")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("preserve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("grub_device")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" partition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" partition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("fstype")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ext4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volume")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" partition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("preserve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" format"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" format"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("device")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" disk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("sda"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("-1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("wipe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" superblock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("flag")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("preserve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("grub_device")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" partition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" partition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("vg\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("devices")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("partition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("preserve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" lvm_volgroup\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" lvm_volgroup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("lv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volgroup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" lvm_volgroup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("preserve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" lvm_partition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" lvm_partition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("fstype")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ext4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volume")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" lvm_partition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("preserve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" format"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" format"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("device")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" format"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("device")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" format"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /boot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),s("h2",{attrs:{id:"almalinux-9"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#almalinux-9"}},[t._v("#")]),t._v(" Almalinux 9")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('lang en_GB.utf8\nkeyboard --xlayouts=\'gb\'\ntimezone Etc/UTC --utc\nrootpw --iscrypted <snip>\nuser --name=m00 --groups=wheel --iscrypted --password=<snip> --uid=5000 --gid=5000\nreboot\ntext\nurl --url=http://192.168.10.250/dist/alma/alma9.1/BaseOS\nrepo --name=AppStream --baseurl=http://192.168.10.250/dist/alma/alma9.1/AppStream\n\n#####\n# Disk layout\n#####\nzerombr\nclearpart --all --initlabel --drives=sda\npart /boot --fstype xfs --size=500 --ondisk=sda --asprimary\npart /boot/efi --fstype vfat --size=200 --ondisk=sda --asprimary\npart pv.01 --size=10 --grow --ondisk=sda\nvolgroup vg_root pv.01\nlogvol / --fstype xfs --name=lv_root --vgname=vg_root --size=4096 --grow\n\nskipx\nfirstboot --disable\nauthselect select minimal\nselinux --enforcing\nfirewall --enabled --ssh\n\n#####\n# Packages\n#####\n%packages\n@^minimal-environment\n@standard\ncloud-utils-growpart\ngit\nsetroubleshoot-server\nvim-enhanced\nwhois\nyum-utils\n%end\n\n#####\n# Post-install scripts\n#####\n%post\n\necho "PermitRootLogin prohibit-password" > /etc/ssh/sshd_config.d/01-sshd_settings.conf\necho "PasswordAuthentication no" >> /etc/ssh/sshd_config.d/01-sshd_settings.conf\n\n\n/usr/bin/sed -i "s/^%wheel\\s*ALL=(ALL)\\s*ALL/%wheel  ALL=(ALL)       NOPASSWD: ALL/g" /etc/sudoers\n\ncurl -fsSL https://tailscale.com/install.sh | sh\ngit clone --depth 1 https://github.com/junegunn/fzf.git /etc/skel/.fzf\n\n\n/usr/bin/mkdir -p /home/m00/.ssh\n/bin/cat >>/home/m00/.ssh/authorized_keys <<EOF\nsk-ssh-ed25519@openssh.com AAAAGnNrLXNzaC1lZDI1NTE5QG9wZW5zc2guY29tAAAAIGDkEih4fsWSmYe0saDobo6R2dwNBx4gLTmUEoE4qwsBAAAABHNzaDo= m00-usba\nsk-ssh-ed25519@openssh.com AAAAGnNrLXNzaC1lZDI1NTE5QG9wZW5zc2guY29tAAAAIFGtHLAZsVSVDbiYqhaX/g4KOZs3Axqcf9fWtWPmYxeLAAAABHNzaDo= m00-usbc\nEOF\nchmod 700 /home/m00/.ssh\nchmod 600 /home/m00/.ssh/authorized_keys\n/bin/chown m00:m00 -R /home/m00/.ssh\n\n/usr/sbin/restorecon -R /home\n\n/usr/bin/dnf update -y\n/usr/bin/dnf kpatch auto\n\n')])])]),s("MediumZoom")],1)}),[],!1,null,null,null);s.default=a.exports}}]);