(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{330:function(a,t,s){"use strict";s.r(t);var e=s(12),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"network-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#network-configuration"}},[a._v("#")]),a._v(" Network Configuration")]),a._v(" "),t("p",[a._v("Things to do with network configurations")]),a._v(" "),t("hr"),a._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#add-remove-ips"}},[a._v("Add/Remove IPs")])]),t("li",[t("a",{attrs:{href:"#netplan"}},[a._v("Netplan")])]),t("li",[t("a",{attrs:{href:"#routes"}},[a._v("Routes")]),t("ul",[t("li",[t("a",{attrs:{href:"#route-info"}},[a._v("Route info")])]),t("li",[t("a",{attrs:{href:"#gateways"}},[a._v("Gateways")])])])]),t("li",[t("a",{attrs:{href:"#example-configs"}},[a._v("Example Configs")]),t("ul",[t("li",[t("a",{attrs:{href:"#ipv6"}},[a._v("IPv6")])]),t("li",[t("a",{attrs:{href:"#ipv4"}},[a._v("IPv4")])])])]),t("li",[t("a",{attrs:{href:"#dns-servers"}},[a._v("DNS servers")]),t("ul",[t("li",[t("a",{attrs:{href:"#custom-entries-in-etc-resolv-conf"}},[a._v("Custom entries in /etc/resolv.conf")])])])]),t("li",[t("a",{attrs:{href:"#ndp-proxy-ipv6"}},[a._v("NDP Proxy IPv6")]),t("ul",[t("li",[t("a",{attrs:{href:"#host-config"}},[a._v("Host config:")])]),t("li",[t("a",{attrs:{href:"#vm-config"}},[a._v("VM Config:")])])])])])]),t("p"),a._v(" "),t("h2",{attrs:{id:"add-remove-ips"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#add-remove-ips"}},[a._v("#")]),a._v(" Add/Remove IPs")]),a._v(" "),t("p",[a._v("Add")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ip")]),a._v(" addr "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("IP"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("/"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("MASK"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" dev "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("DEVICE"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("p",[a._v("Remove")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ip")]),a._v(" addr del "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("IP"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("/"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("MASK"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" dev "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("DEVICE"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("h2",{attrs:{id:"netplan"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#netplan"}},[a._v("#")]),a._v(" Netplan")]),a._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("network")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("renderer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" networkd\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ethernets")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("eth0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("addresses")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" <IP1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")]),a._v("/24\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" <IP2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")]),a._v("/32\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("nameservers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("search")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("mydomain"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" otherdomain"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("addresses")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("10.10.10.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" 1.1.1.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("routes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("to")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" 0.0.0.0/0\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("via")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" <GATEWAY"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")]),a._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("on-link")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("true")]),a._v("\n")])])]),t("h2",{attrs:{id:"routes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#routes"}},[a._v("#")]),a._v(" Routes")]),a._v(" "),t("h3",{attrs:{id:"route-info"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#route-info"}},[a._v("#")]),a._v(" Route info")]),a._v(" "),t("p",[a._v("IPv4")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ip")]),a._v(" route\n")])])]),t("p",[a._v("IPv6")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ip")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-6")]),a._v(" route\n")])])]),t("h3",{attrs:{id:"gateways"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gateways"}},[a._v("#")]),a._v(" Gateways")]),a._v(" "),t("p",[a._v("Add specific gateway")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ip")]),a._v(" route "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("IP"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("/"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("MASK"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" dev "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("DEVICE"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("p",[a._v("Set default route")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ip")]),a._v(" route "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" default via "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("IP"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("/"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("MASK"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("h2",{attrs:{id:"example-configs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example-configs"}},[a._v("#")]),a._v(" Example Configs")]),a._v(" "),t("h3",{attrs:{id:"ipv6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ipv6"}},[a._v("#")]),a._v(" IPv6")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("iface ens3 inet6 static\naddress 2001:xxxx:xxxx::1234\nnetmask 128\npost-up /sbin/ip -6 route add 2001:xxxx:xxxx::0001 dev ens3\npost-up /sbin/ip -6 route add default via 2001:xxxx:xxxx::0001\npre-down /sbin/ip -6 route del default via 2001:xxxx:xxxx::0001\npre-down /sbin/ip -6 route del 2001:xxxx:xxxx::0001 dev ens3\n")])])]),t("h3",{attrs:{id:"ipv4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ipv4"}},[a._v("#")]),a._v(" IPv4")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("auto ens160\niface ens160 inet static\naddress 123.456.789.012\nnetmask 255.255.255.0\ngateway 123.456.789.254\npost-up /sbin/ip route add 123.456.789.254 dev ens160\npost-up /sbin/ip route add default via 123.456.789.254\npre-down /sbin/ip route del default via 123.456.789.254\npre-down /sbin/ip route del 123.456.789.254 dev ens160\n")])])]),t("h2",{attrs:{id:"dns-servers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-servers"}},[a._v("#")]),a._v(" DNS servers")]),a._v(" "),t("h3",{attrs:{id:"custom-entries-in-etc-resolv-conf"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#custom-entries-in-etc-resolv-conf"}},[a._v("#")]),a._v(" Custom entries in /etc/resolv.conf")]),a._v(" "),t("ul",[t("li",[a._v("Create or edit the file at "),t("code",[a._v("/etc/resolvconf/resolv.conf.d/tail")])])]),a._v(" "),t("p",[t("code",[a._v("nano")]),a._v("/"),t("code",[a._v("vim")]),a._v(" "),t("code",[a._v("/etc/resolvconf/resolv.conf.d/tail")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("nameserver 1.1.1.1\n")])])]),t("h2",{attrs:{id:"ndp-proxy-ipv6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ndp-proxy-ipv6"}},[a._v("#")]),a._v(" NDP Proxy IPv6")]),a._v(" "),t("p",[a._v("Just some notes I had on making an IPv6 block available to a VM on something like Proxmox\nThe steps are pretty generic, so you will need to make the changes according to your OS setup.")]),a._v(" "),t("h3",{attrs:{id:"host-config"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#host-config"}},[a._v("#")]),a._v(" Host config:")]),a._v(" "),t("p",[a._v("vmbr0 = external\nvmbr1 = dummy0")]),a._v(" "),t("p",[a._v("vmbr0 = IP:v6::/64")]),a._v(" "),t("p",[a._v("vmbr1 = Host:IP:v6:addr")]),a._v(" "),t("p",[t("code",[a._v("ip -6 addr add Host:IP:v6:addr/64 dev vmbr1")])]),a._v(" "),t("p",[a._v("Delete IP:v6::/64 route from vmbr0")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /proc/sys/net/ipv6/conf/vmbr0/proxy_ndp\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /proc/sys/net/ipv6/conf/all/forwarding\n")])])]),t("p",[a._v("Add these to your system config:")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("net.ipv6.conf.default.forwarding = 1\nnet.ipv6.conf.all.forwarding = 1\nnet.ipv6.conf.default.proxy_ndp = 1\nnet.ipv6.conf.all.proxy_ndp = 1\n")])])]),t("p",[t("code",[a._v("ip -6 neigh add proxy IP:v6:vm:addr/64 dev vmbr0")])]),a._v(" "),t("p",[t("code",[a._v("ip -6 neigh add proxy IP:v6:vm:addr/64 dev vmbr1")])]),a._v(" "),t("h3",{attrs:{id:"vm-config"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vm-config"}},[a._v("#")]),a._v(" VM Config:")]),a._v(" "),t("p",[a._v("IP = IP:v6:vm:addr/64")]),a._v(" "),t("p",[t("code",[a._v("ip -6 addr add IP:v6:vm:addr/64 dev eth0")])]),a._v(" "),t("p",[a._v("Edit your network settings so that your gateway = Host:IP:v6:addr")]),a._v(" "),t("MediumZoom")],1)}),[],!1,null,null,null);t.default=r.exports}}]);