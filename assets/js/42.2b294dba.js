(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{333:function(s,t,r){"use strict";r.r(t);var e=r(12),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"ovh-kernel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ovh-kernel"}},[s._v("#")]),s._v(" OVH Kernel")]),s._v(" "),t("p",[s._v("Instructions on how to change the kernel on an OVH server from the OVH supplied kernel to the official distribution kernel.")]),s._v(" "),t("hr"),s._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#ubuntu"}},[s._v("Ubuntu")]),t("ul",[t("li",[t("a",{attrs:{href:"#check-the-current-kernel-version"}},[s._v("Check the Current Kernel Version")])]),t("li",[t("a",{attrs:{href:"#remove-execute-permission"}},[s._v("Remove Execute Permission")])]),t("li",[t("a",{attrs:{href:"#install-distribution-kernel"}},[s._v("Install Distribution Kernel")])]),t("li",[t("a",{attrs:{href:"#delete-the-ovh-kernel"}},[s._v("Delete the OVH Kernel")])]),t("li",[t("a",{attrs:{href:"#update-grub"}},[s._v("Update Grub")])]),t("li",[t("a",{attrs:{href:"#reboot"}},[s._v("Reboot")])])])]),t("li",[t("a",{attrs:{href:"#centos-7"}},[s._v("Centos 7")]),t("ul",[t("li",[t("a",{attrs:{href:"#check-the-current-kernel-version"}},[s._v("Check the Current Kernel Version")])]),t("li",[t("a",{attrs:{href:"#remove-execute-permission"}},[s._v("Remove Execute Permission")])]),t("li",[t("a",{attrs:{href:"#install-distribution-kernel"}},[s._v("Install Distribution Kernel")])]),t("li",[t("a",{attrs:{href:"#update-grub"}},[s._v("Update Grub")])]),t("li",[t("a",{attrs:{href:"#reboot"}},[s._v("Reboot")])])])])])]),t("p"),s._v(" "),t("h2",{attrs:{id:"ubuntu"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu"}},[s._v("#")]),s._v(" Ubuntu")]),s._v(" "),t("p",[s._v("Instructions here are written for 16.04, but should be similar for 18.04.")]),s._v(" "),t("h3",{attrs:{id:"check-the-current-kernel-version"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#check-the-current-kernel-version"}},[s._v("#")]),s._v(" Check the Current Kernel Version")]),s._v(" "),t("p",[s._v("An OVH kernel has the xxxx-std-ipv6-64 suffix as seen below.")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@nsxxxxxx:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uname -a")]),s._v("\nLinux nsxxxxxx "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.9")]),s._v(".103-xxxx-std-ipv6-64 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#222672 SMP Mon Jun 4 15:16:03 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux")]),s._v("\n")])])]),t("h3",{attrs:{id:"remove-execute-permission"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#remove-execute-permission"}},[s._v("#")]),s._v(" Remove Execute Permission")]),s._v(" "),t("p",[s._v("Removing the execute permission stops grub from using this file to generate its configuration.")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@nsxxxxxx:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod -x /etc/grub.d/06_OVHkernel")]),s._v("\nroot@nsxxxxxx:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -lah /etc/grub.d/")]),s._v("\ntotal 88K\ndrwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":16 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwxr-xr-x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("95")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":27 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(".6K Feb  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" 00_header\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(".2K Jan "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" 05_debian_theme\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("372")]),s._v(" Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":12 06_OVHkernel\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  13K Feb  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" 10_linux\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  11K Feb  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" 20_linux_xen\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  12K Feb  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" 30_os-prober\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".4K Feb  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" 30_uefi-firmware\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("214")]),s._v(" Feb  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" 40_custom\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("216")]),s._v(" Feb  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" 41_custom\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("483")]),s._v(" Feb  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" README\n")])])]),t("h3",{attrs:{id:"install-distribution-kernel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-distribution-kernel"}},[s._v("#")]),s._v(" Install Distribution Kernel")]),s._v(" "),t("p",[s._v("The name of the distribution kernel starts with "),t("code",[s._v("linux-generic")]),s._v(" so we'll run:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" linux-generic\n")])])]),t("p",[s._v("We installed "),t("code",[s._v("4.4.0-135-generic")]),s._v(" with the above command.")]),s._v(" "),t("p",[s._v("Check the contents of "),t("code",[s._v("/boot")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@nsxxxxxx:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -lah /boot")]),s._v("\ntotal 69M\ndrwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".0K Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":24 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwxr-xr-x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":23 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".2M Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":51 abi-4.4.0-135-generic\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root 187K Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":51 config-4.4.0-135-generic\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root 102K Jun  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":16 config-4.9.103-xxxx-std-ipv6-64\ndrwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".0K Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":24 grub\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  37M Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":24 initrd.img-4.4.0-135-generic\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(".2M Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":24 initrd.img-4.9.103-xxxx-std-ipv6-64\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":51 retpoline-4.4.0-135-generic\n-rw-------  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".8M Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":51 System.map-4.4.0-135-generic\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".1M Jun  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":16 System.map-4.9.103-xxxx-std-ipv6-64\n-rw-------  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(".9M Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":51 vmlinuz-4.4.0-135-generic\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(".1M Jun  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":16 vmlinuz-4.9.103-xxxx-std-ipv6-64\n")])])]),t("h3",{attrs:{id:"delete-the-ovh-kernel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#delete-the-ovh-kernel"}},[s._v("#")]),s._v(" Delete the OVH Kernel")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@nsxxxxxx:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm /boot/*xxxx-std-ipv6-64")]),s._v("\nroot@nsxxxxxx:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -lah /boot")]),s._v("\ntotal 49M\ndrwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".0K Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":31 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwxr-xr-x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":23 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".2M Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":51 abi-4.4.0-135-generic\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root 187K Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":51 config-4.4.0-135-generic\ndrwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".0K Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":26 grub\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  37M Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":24 initrd.img-4.4.0-135-generic\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":51 retpoline-4.4.0-135-generic\n-rw-------  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".8M Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":51 System.map-4.4.0-135-generic\n-rw-------  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(".9M Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":51 vmlinuz-4.4.0-135-generic\n")])])]),t("h3",{attrs:{id:"update-grub"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#update-grub"}},[s._v("#")]),s._v(" Update Grub")]),s._v(" "),t("p",[s._v("On Ubuntu, we can just run "),t("code",[s._v("update-grub")]),s._v(" to generate the grub config.")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@nsxxxxxx:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# update-grub")]),s._v("\nGenerating grub configuration "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nWarning: Setting GRUB_TIMEOUT to a non-zero value when GRUB_HIDDEN_TIMEOUT is "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" is no longer supported.\nFound linux image: /boot/vmlinuz-4.4.0-135-generic\nFound initrd image: /boot/initrd.img-4.4.0-135-generic\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])])]),t("h3",{attrs:{id:"reboot"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reboot"}},[s._v("#")]),s._v(" Reboot")]),s._v(" "),t("p",[s._v("Reboot your server now and then check the kernel again with "),t("code",[s._v("uname -a")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@nsxxxxxx:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uname -a")]),s._v("\nLinux nsxxxxxx "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.4")]),s._v(".0-135-generic "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#161-Ubuntu SMP Mon Aug 27 10:45:01 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux")]),s._v("\n")])])]),t("p",[s._v("Confirm that you are now on the official kernel, all done.")]),s._v(" "),t("h2",{attrs:{id:"centos-7"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos-7"}},[s._v("#")]),s._v(" Centos 7")]),s._v(" "),t("h3",{attrs:{id:"check-the-current-kernel-version-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#check-the-current-kernel-version-2"}},[s._v("#")]),s._v(" Check the Current Kernel Version")]),s._v(" "),t("p",[s._v("An OVH kernel has the xxxx-std-ipv6-64 suffix as seen below.")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@nsxxxxxx ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uname -a")]),s._v("\nLinux nsxxxxxx "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.9")]),s._v(".126-xxxx-std-ipv6-64 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#363650 SMP Mon Sep 10 12:52:22 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux")]),s._v("\n")])])]),t("h3",{attrs:{id:"remove-execute-permission-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#remove-execute-permission-2"}},[s._v("#")]),s._v(" Remove Execute Permission")]),s._v(" "),t("p",[s._v("Removing the execute permission stops grub from using this file to generate its configuration.")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@nsxxxxxx ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod -x /etc/grub.d/06_OVHkernel")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@nsxxxxxx ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -lah /etc/grub.d/")]),s._v("\ntotal 84K\ndrwx------  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":48 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwxr-xr-x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("85")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":54 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(".5K Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" 00_header\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".1K Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" 00_tuned\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("232")]),s._v(" Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" 01_users\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("372")]),s._v(" Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":49 06_OVHkernel\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  11K Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" 10_linux\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  11K Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" 20_linux_xen\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".5K Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" 20_ppc_terminfo\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  11K Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" 30_os-prober\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("214")]),s._v(" Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" 40_custom\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("216")]),s._v(" Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" 41_custom\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("483")]),s._v(" Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v(" README\n")])])]),t("h3",{attrs:{id:"install-distribution-kernel-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-distribution-kernel-2"}},[s._v("#")]),s._v(" Install Distribution Kernel")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" kernel\n")])])]),t("p",[s._v("We installed "),t("code",[s._v("3.10.0-862.11.6.el7")]),s._v(" with the above command.")]),s._v(" "),t("p",[s._v("Check the contents of "),t("code",[s._v("/boot")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@nsxxxxxx ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -lah /boot")]),s._v("\ntotal 72M\ndr-xr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":08 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndr-xr-xr-x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":53 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root 145K Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":02 config-3.10.0-862.11.6.el7.x86_64\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root 103K Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":52 config-4.9.126-xxxx-std-ipv6-64\ndrwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Aug  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 01:01 efi\ndrwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Aug  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 01:03 grub\ndrwx------  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":08 grub2\n-rw-------  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  20M Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":08 initramfs-3.10.0-862.11.6.el7.x86_64.img\n-rw-------  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  17M Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":49 initramfs-4.9.126-xxxx-std-ipv6-64.img\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root 299K Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":05 symvers-3.10.0-862.11.6.el7.x86_64.gz\n-rw-------  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".3M Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":02 System.map-3.10.0-862.11.6.el7.x86_64\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".1M Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":52 System.map-4.9.126-xxxx-std-ipv6-64\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  14M Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":52 vmlinux-4.9.126-xxxx-std-ipv6-64.bz2\n-rwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(".0M Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":02 vmlinuz-3.10.0-862.11.6.el7.x86_64\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("171")]),s._v(" Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":02 .vmlinuz-3.10.0-862.11.6.el7.x86_64.hmac\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(".7M Sep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":52 vmlinuz-4.9.126-xxxx-std-ipv6-64\n")])])]),t("h3",{attrs:{id:"update-grub-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#update-grub-2"}},[s._v("#")]),s._v(" Update Grub")]),s._v(" "),t("p",[s._v("First confirm that your "),t("code",[s._v("grub2.cfg")]),s._v(" file is at "),t("code",[s._v("/etc/grub2.cfg")]),s._v(".")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@nsxxxxxx ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -lah /etc/grub2.cfg")]),s._v("\nlrwxrwxrwx "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" Aug  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 01:04 /etc/grub2.cfg -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/boot/grub2/grub.cfg\n")])])]),t("p",[s._v("Run the command to generate the new configuration")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@nsxxxxxx ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# grub2-mkconfig -o "$(readlink -e /etc/grub2.cfg)"')]),s._v("\nGenerating grub configuration "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nFound linux image: /boot/vmlinuz-4.9.126-xxxx-std-ipv6-64\nFound initrd image: /boot/initramfs-4.9.126-xxxx-std-ipv6-64.img\nFound linux image: /boot/vmlinuz-3.10.0-862.11.6.el7.x86_64\nFound initrd image: /boot/initramfs-3.10.0-862.11.6.el7.x86_64.img\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])])]),t("h3",{attrs:{id:"reboot-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reboot-2"}},[s._v("#")]),s._v(" Reboot")]),s._v(" "),t("p",[s._v("Reboot your server and then check it afterwards:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@nsxxxxxx ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uname -a")]),s._v("\nLinux nsxxxxxx "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),s._v(".0-862.11.6.el7.x86_64 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1 SMP Tue Aug 14 21:49:04 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux")]),s._v("\n")])])]),t("p",[s._v("You should now be on the correct kernel.")]),s._v(" "),t("MediumZoom")],1)}),[],!1,null,null,null);t.default=n.exports}}]);