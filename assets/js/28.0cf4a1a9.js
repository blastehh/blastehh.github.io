(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{317:function(e,a,t){"use strict";t.r(a);var s=t(12),r=Object(s.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh"}},[e._v("#")]),e._v(" SSH")]),e._v(" "),a("p",[e._v("Things to do via SSH on the ESXi host")]),e._v(" "),a("hr"),e._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#add-ssh-key-authentication"}},[e._v("Add SSH key authentication")]),a("ul",[a("li",[a("a",{attrs:{href:"#ensure-that-the-file-permissions-are-correct"}},[e._v("Ensure that the file permissions are correct")])])])]),a("li",[a("a",{attrs:{href:"#check-running-processes"}},[e._v("Check running processes")])]),a("li",[a("a",{attrs:{href:"#reset-locked-account"}},[e._v("Reset locked account")]),a("ul",[a("li",[a("a",{attrs:{href:"#enable-esxi-shell"}},[e._v("Enable ESXi shell")])]),a("li",[a("a",{attrs:{href:"#check-the-locked-account"}},[e._v("Check the locked account")])]),a("li",[a("a",{attrs:{href:"#reset-the-locked-account"}},[e._v("Reset the locked account")])])])]),a("li",[a("a",{attrs:{href:"#manage-network-routes"}},[e._v("Manage Network Routes")]),a("ul",[a("li",[a("a",{attrs:{href:"#list-routes"}},[e._v("List Routes")])]),a("li",[a("a",{attrs:{href:"#add-a-new-route"}},[e._v("Add a New Route")])]),a("li",[a("a",{attrs:{href:"#remove-a-route"}},[e._v("Remove a Route")])])])]),a("li",[a("a",{attrs:{href:"#manage-nfs-shares"}},[e._v("Manage NFS Shares")]),a("ul",[a("li",[a("a",{attrs:{href:"#list-shares"}},[e._v("List Shares")])]),a("li",[a("a",{attrs:{href:"#remove-share"}},[e._v("Remove Share")])])])])])]),a("p"),e._v(" "),a("h2",{attrs:{id:"add-ssh-key-authentication"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-ssh-key-authentication"}},[e._v("#")]),e._v(" Add SSH key authentication")]),e._v(" "),a("ul",[a("li",[e._v("Log in")]),e._v(" "),a("li",[e._v("Navigate to "),a("code",[e._v("/etc/ssh")])]),e._v(" "),a("li",[e._v("Create a folder for your user "),a("code",[e._v("/etc/ssh/keys-<username>/")])]),e._v(" "),a("li",[e._v("Create the "),a("code",[e._v("authorized_keys")]),e._v(" file and populate it with your SSH key.")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("echo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"<key>"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" /etc/ssh/keys-"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("username"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/authorized_keys\n")])])]),a("h3",{attrs:{id:"ensure-that-the-file-permissions-are-correct"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ensure-that-the-file-permissions-are-correct"}},[e._v("#")]),e._v(" Ensure that the file permissions are correct")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1600")]),e._v(" /etc/ssh/keys-"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("username"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/authorized_keys\n")])])]),a("h2",{attrs:{id:"check-running-processes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#check-running-processes"}},[e._v("#")]),e._v(" Check running processes")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("ps")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-Tcst")]),e._v("\n")])])]),a("h2",{attrs:{id:"reset-locked-account"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reset-locked-account"}},[e._v("#")]),e._v(" Reset locked account")]),e._v(" "),a("p",[e._v("To reset a locked account manually, you will need direct access to the ESXi console")]),e._v(" "),a("h3",{attrs:{id:"enable-esxi-shell"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#enable-esxi-shell"}},[e._v("#")]),e._v(" Enable ESXi shell")]),e._v(" "),a("ol",[a("li",[e._v("Press "),a("code",[e._v("F2")]),e._v(" at the login prompt")]),e._v(" "),a("li",[e._v("Select "),a("code",[e._v("Troubleshooting Option")])]),e._v(" "),a("li",[e._v("Select "),a("code",[e._v("Enable ESXi Shell")])]),e._v(" "),a("li",[e._v("Once enabled, press the key combination "),a("code",[e._v("ALT")]),e._v("+"),a("code",[e._v("F1")])])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("You can return back to the GUI using "),a("code",[e._v("ALT")]),e._v("+"),a("code",[e._v("F2")])])]),e._v(" "),a("h3",{attrs:{id:"check-the-locked-account"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#check-the-locked-account"}},[e._v("#")]),e._v(" Check the locked account")]),e._v(" "),a("p",[e._v("Once you are logged in to the console, run:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("pam_tally2 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--user")]),e._v(" root\n")])])]),a("h3",{attrs:{id:"reset-the-locked-account"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reset-the-locked-account"}},[e._v("#")]),e._v(" Reset the locked account")]),e._v(" "),a("p",[e._v("Run:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("pam_tally2 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--user")]),e._v(" root "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--reset")]),e._v("\n")])])]),a("h2",{attrs:{id:"manage-network-routes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#manage-network-routes"}},[e._v("#")]),e._v(" Manage Network Routes")]),e._v(" "),a("h3",{attrs:{id:"list-routes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#list-routes"}},[e._v("#")]),e._v(" List Routes")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("esxcli network ip route ipv4 list\n")])])]),a("h3",{attrs:{id:"add-a-new-route"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-a-new-route"}},[e._v("#")]),e._v(" Add a New Route")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("esxcli network ip route ipv4 add --gateway <Gateway IP> --network 192.168.0.0/16\n")])])]),a("h3",{attrs:{id:"remove-a-route"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#remove-a-route"}},[e._v("#")]),e._v(" Remove a Route")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("esxcli network ip route ipv4 remove -n 192.168.0.0/16 -g <Gateway IP>\n")])])]),a("h2",{attrs:{id:"manage-nfs-shares"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#manage-nfs-shares"}},[e._v("#")]),e._v(" Manage NFS Shares")]),e._v(" "),a("h3",{attrs:{id:"list-shares"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#list-shares"}},[e._v("#")]),e._v(" List Shares")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("esxcli storage nfs list\n")])])]),a("h3",{attrs:{id:"remove-share"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#remove-share"}},[e._v("#")]),e._v(" Remove Share")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("esxcli storage nfs remove --volume-name=<NFS Share>\n")])])]),a("MediumZoom")],1)}),[],!1,null,null,null);a.default=r.exports}}]);